<metal:page use-macro="context/@@getpaid-content-template/macros/content_space"
	i18n:domain="plonegetpaid">
  <metal:block fill-slot="getpaid_content">
    <h3 i18n:translate="heading_checkout"> Checkout </h3>

  <form action="."
        tal:attributes="action request/URL" 
	method="post"
	enctype="multipart/form-data">

    <div class="hidden_fields" tal:content="structure view/hidden_inputs"> </div>    

    <div class="portalMessage" tal:content="view/status" tal:condition="view/status" i18n:translate=""></div>

    <div class="checkoutSection"
         tal:define="widgets python: view.getWidgetsByIName('Products.PloneGetPaid.interfaces.IBuyerInfo')"
         tal:condition="widgets">
      <h4 class="checkoutSectionHeading" i18n:translate="heading_buyer_identification">Personal information</h4>
	    <fieldset>
  	    <div metal:use-macro="context/@@getpaid-form/fieldset"> </div>
  	  </fieldset>
    </div>
             
    <div class="checkoutSection"
         tal:define="widgets python: view.getWidgetsByIName('getpaid.core.interfaces.IBillingAddress')">
      <h4 class="checkoutSectionHeading" i18n:translate="heading_billing_address">Billing address</h4>
	    <fieldset>
  	    <div metal:use-macro="context/@@getpaid-form/fieldset"> </div>
  	  </fieldset>
    </div>

  	<div class="checkoutSection"  	  
  	     tal:define="widgets python: view.getWidgetsByIName('getpaid.core.interfaces.IShippingAddress')"
  	     tal:condition="widgets">
      <h4 class="checkoutSectionHeading" i18n:translate="heading_shipping_address">Shipping address</h4>
	    <tal:addressactions tal:define="widgets python: view.getWidgetsByIName('Products.PloneGetPaid.interfaces.IAddressActions')">
	      <script type="text/javascript" src="++resource++address.js"></script>
	      <div metal:use-macro="context/@@getpaid-form/fieldset"> </div>
	    </tal:addressactions>
  	  <fieldset id="shipping-address-fieldset">
  	    <div metal:use-macro="context/@@getpaid-form/fieldset"> </div>
  	  </fieldset>
  	</div>

	  <div id="cartActionsView">
	    <span class="actionButtons"
		  tal:condition="view/availableActions">
	      <input tal:repeat="action view/actions"
		     tal:replace="structure action/render"/>
	    </span>
	  </div>
    
  </form>

  </metal:block>
</metal:page>
