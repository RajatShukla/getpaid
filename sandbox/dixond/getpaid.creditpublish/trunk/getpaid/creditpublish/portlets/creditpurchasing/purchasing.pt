<div class="portlet">
  <form tal:define="formName    view/formname"
        tal:attributes="id      string:creditpurchasing;
                        name    formName;
                        action  request/ACTUAL_URL;
                        method  string:post">
    <fieldset>
      <legend>Credit</legend>
      <div id="purchase-credit"
           tal:define="credit     view/current_credit;
                       cashvalue  view/cashvalue">
        <p class="purchaseMessage">
          <span tal:condition="not: credit">You don't have any weeks of credit currently available</span>
          <span tal:condition="credit">You have <tal:cont content="cashvalue"> (<tal:cont content="credit" /> weeks) of credit currently available</span>
        </p>
        <div class="creditPurchasingDetails"
             tal:define="pricing    view/credit_price;
                         price      pricing/price;
                         taxes      pricing/taxes">
            <input type="submit" tal:attributes="name  string:${view/nameprefix}.submitted" id="docreditpurchasing" value="Purchase" />
            <select tal:attributes="name  string:${view/nameprefix}.weeks:int" id="purchaseweeks">
              <tal:rep repeat="number   view/weeks_options">
                <option tal:attributes="value      number"
                        tal:content="number">52</option>
              </tal:rep>
            </select>
            <span class="creditDetailedInfo">
            more weeks of credit at $<tal:cont content="price"
                                     /> per week <tal:cond condition="taxes"
                                     ><tal:cont content="string:(includes "
                                     /><tal:rep repeat="tax taxes"
                                     ><tal:cont content="tax"
                                     /><tal:cond condition="not:repeat/tax/last" content="string:, "
                                     /></tal:rep
                                     ><tal:cont content="string:)"
                                     /></tal:cond>
          </span>
          <input type="hidden"
                 tal:attributes="name  string:${view/nameprefix}.credititem;
                                 value view/data/representative_object"
                 id="credititem" />
          <div class="visualClear"><!-- --></div>
        </div>
      </div>
    </fieldset>
    <div class="visualClear"><!-- --></div>
  </form>
</div>
