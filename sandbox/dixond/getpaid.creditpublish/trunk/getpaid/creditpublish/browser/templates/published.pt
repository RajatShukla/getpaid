  <form tal:define="formName    view/formname"
        tal:attributes="id      string:creditpublishing-viewlet;
                        name    formName;
                        action  request/ACTUAL_URL;
                        method  string:post">
      <div id="publishing-control"
           tal:define="credit     view/current_credit;
                       listed  view/is_listed">
        <p class="publishMessage">
          This item's current week published ends <tal:cont content="view/current_expiry" />
        </p>
        <ul>
          <li>
            It will remain published for a further
            <select tal:attributes="name  string:${view/nameprefix}.weeks:int" id="publishweeks">
              <tal:rep repeat="number   view/weeks_options">
                <option tal:attributes="value      number/value;
                                        selected   number/selected"
                        tal:content="number/value">52</option>
              </tal:rep>
            </select>
            weeks after that date:
            <input type="submit" tal:attributes="name  string:${view/nameprefix}.update" id="docreditpublishing" value="Update" class="creditPublishingActions" />
          </li>
          <li>
            You can de-publish it at any time: 
            <input type="submit" tal:attributes="name  string:${view/nameprefix}.depublish" id="docreditdepublishing" value="De-publish this item" class="creditPublishingActions" />
          </li>
    </div>
    <input type="hidden" tal:attributes="name  string:${view/nameprefix}.submitted" value="submitted" />
  </form>
